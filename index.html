<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoTracker | Advanced Portfolio Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/yfinance@0.0.6/dist/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="./static/main.js"></script>
    <link href="./static/style.css" rel="stylesheet">
</head>

<body>
    <!-- Navigation -->
    <nav class="bg-gray-800 py-4 px-6 shadow-xl">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center">
                <i class="fa-brands fa-bitcoin text-accent text-3xl mr-3"></i>
                <h1 class="text-2xl font-bold text-white">CryptoTracker</h1>
            </div>
            <!-- Desktop Menu -->
            <div class="hidden md:flex space-x-4 items-center">
                <button id="refresh-data"
                    class="px-4 py-2 rounded-lg bg-accent text-gray-900 font-semibold hover:bg-opacity-90 transition">
                    <i class="fas fa-sync mr-2"></i>Refresh Data
                </button>
                <button
                    class="px-4 py-2 rounded-lg border border-accent text-accent font-medium hover:bg-gray-700 transition">
                    <i class="fas fa-user mr-2"></i>Account
                </button>
                <button id="ai-chat-toggle"
                    class="px-4 py-2 rounded-lg bg-accent text-gray-900 font-semibold hover:bg-opacity-90 transition glow-hover">
                    <i class="fas fa-robot mr-2"></i>AI Chat
                </button>
            </div>
            <!-- Mobile Menu Toggle -->
            <button id="menu-toggle"
                class="md:hidden px-4 py-2 rounded-lg bg-accent text-gray-900 font-semibold hover:bg-opacity-90 transition">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        <!-- Collapsible Mobile Menu -->
        <div id="mobile-menu" class="md:hidden absolute top-full left-0 w-full bg-gray-800 p-4 hidden">
            <div class="flex flex-col space-y-2">
                <button id="refresh-data-mobile"
                    class="px-4 py-2 rounded-lg bg-accent text-gray-900 font-semibold hover:bg-opacity-90 transition">
                    <i class="fas fa-sync mr-2"></i>Refresh Data
                </button>
                <button id="account-mobile"
                    class="px-4 py-2 rounded-lg border border-accent text-accent font-medium hover:bg-gray-700 transition">
                    <i class="fas fa-user mr-2"></i>Account
                </button>
            </div>
        </div>
    </nav>
    <!-- Breadcrumb -->
    <div class="breadcrumb">
        <div class="container mx-auto px-4">
            <a href="#news-section" id="news-breadcrumb">Latest Crypto News</a>
        </div>
    </div>

    <button id="ai-chat-toggle-mobile"
        class="fixed bottom-6 right-6 z-50 px-4 py-4 rounded-full bg-accent text-gray-900 shadow-lg hover:bg-opacity-90 transition glow-hover lg:hidden flex items-center justify-center w-14 h-14">
        <i class="fas fa-robot text-xl"></i>
    </button>

    <!-- AI Chat Modal -->
    <div id="ai-chat-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50">
        <div class="card p-4 w-full max-w-xs sm:max-w-sm md:max-w-lg lg:max-w-xl relative">
            <button id="ai-chat-close" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <i class="fas fa-times text-xl"></i>
            </button>
            <h2 class="text-xl font-bold text-white mb-6">
                <i class="fas fa-robot text-accent mr-3"></i>AI Crypto Assistant
            </h2>
            <div class="download-container mb-4">
                <select id="model-selection"
                    class="w-full bg-gray-700 border border-gray-600 rounded-lg py-2 px-3 text-white focus:outline-none focus:border-accent sm:text-sm">
                </select>

                <button id="download"
                    class="ml-2 px-4 py-2 rounded-lg bg-accent text-gray-900 font-semibold hover:bg-opacity-90 transition">Download</button>
            </div>
            <p id="download-status" class="text-gray-400 text-sm mb-4 hidden"></p>
            <div class="chat-container">
                <div id="chat-box"
                    class="chat-box bg-gray-800 rounded-lg p-4 max-h-96 overflow-y-auto border border-gray-700"></div>
                <div id="chat-stats" class="chat-stats text-gray-400 text-sm mt-2 hidden"></div>
                <div class="chat-input-container mt-4 flex">
                    <input type="text" id="user-input"
                        placeholder="Ask about crypto prices, trends, or portfolio tips..."
                        class="flex-1 bg-gray-700 border border-gray-600 rounded-lg py-2 px-4 text-white focus:outline-none focus:border-accent">
                    <button id="send"
                        class="ml-2 px-4 py-2 rounded-lg bg-accent text-gray-900 font-semibold hover:bg-opacity-90 transition"
                        disabled>Send</button>
                </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-4 py-8">
        <!-- Portfolio Summary Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="card p-6 fade-in">
                <div class="flex items-center">
                    <div class="bg-gray-700 rounded-full p-3 mr-4">
                        <i class="fa-solid fa-chart-line text-accent text-xl"></i>
                    </div>
                    <div>
                        <h3 class="text-gray-400 text-sm uppercase">Portfolio Value</h3>
                        <p class="text-2xl font-bold text-white" id="portfolio-value">$0.00</p>
                    </div>
                </div>
                <p class="mt-3 text-accent text-sm" id="portfolio-change"><i class="fas fa-caret-up mr-1"></i>0.0% today
                </p>
            </div>
            <div class="card p-6 fade-in">
                <div class="flex items-center">
                    <div class="bg-gray-700 rounded-full p-3 mr-4">
                        <i class="fa-solid fa-coins text-accent text-xl"></i>
                    </div>
                    <div>
                        <h3 class="text-gray-400 text-sm uppercase">Total Holdings</h3>
                        <p class="text-2xl font-bold text-white" id="total-holdings">0 Assets</p>
                    </div>
                </div>
                <p class="mt-3 text-accent text-sm">Diversified portfolio</p>
            </div>
            <div class="card p-6 fade-in">
                <div class="flex items-center">
                    <div class="bg-gray-700 rounded-full p-3 mr-4">
                        <i class="fa-solid fa-arrow-trend-up text-accent text-xl"></i>
                    </div>
                    <div>
                        <h3 class="text-gray-400 text-sm uppercase">Best Performer</h3>
                        <p class="text-2xl font-bold text-white" id="best-performer">--</p>
                    </div>
                </div>
                <p class="mt-3 text-red-400 text-sm" id="worst-performer">--</p>
            </div>
            <div class="card p-6 fade-in">
                <div class="flex items-center">
                    <div class="bg-gray-700 rounded-full p-3 mr-4">
                        <i class="fa-solid fa-wallet text-accent text-xl"></i>
                    </div>
                    <div>
                        <h3 class="text-gray-400 text-sm uppercase">24h Change</h3>
                        <p class="text-2xl font-bold text-white" id="change-value">$0.00</p>
                    </div>
                </div>
                <p class="mt-3 text-accent text-sm" id="change-percent"><i class="fas fa-caret-up mr-1"></i>0.0% gain
                </p>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Left Column -->
            <div class="lg:w-7/12">
                <!-- Portfolio Overview -->
                <div class="card p-6 mb-8 fade-in">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-white">
                            <i class="fas fa-chart-pie text-accent mr-3"></i>Portfolio Overview
                        </h2>
                        <button id="export-csv" class="text-accent text-sm font-medium flex items-center">
                            <i class="fas fa-download mr-2"></i> Export CSV
                        </button>
                    </div>
                    <div class="overflow-x-auto sm:rounded-lg shadow">
                        <table class="min-w-full divide-y divide-gray-700 table-striped bg-gray-800"
                            id="portfolio-table">
                            <thead>
                                <tr class="text-gray-400 text-sm">
                                    <th class="py-3 px-4 text-left">Coin</th>
                                    <th class="py-3 px-4 text-right">Holdings</th>
                                    <th class="py-3 px-4 text-right">Price</th>
                                    <th class="py-3 px-4 text-right">Value</th>
                                    <th class="py-3 px-4 text-right">24h</th>
                                    <th class="py-3 px-4 text-right">Profit/Loss %</th>
                                    <th class="py-3 px-4 text-center">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="text-white" id="portfolio-body"></tbody>
                        </table>
                    </div>
                </div>

                <!-- AI Price Prediction -->
                <div class="card p-6 mb-8 fade-in">
                    <h2 class="text-xl font-bold text-white mb-6">
                        <i class="fas fa-robot text-accent mr-3"></i>AI Price Prediction
                    </h2>
                    <div class="mb-6 p-4 bg-gray-800 rounded-lg border border-accent">
                        <div class="flex items-start">
                            <i class="fas fa-info-circle text-accent text-lg mr-3 mt-1"></i>
                            <p class="text-sm text-gray-300">
                                <span class="font-medium text-accent">Disclaimer:</span> AI predictions are based on
                                technical analysis and historical data. They do not constitute financial advice and
                                should not be relied upon for investment decisions. Cryptocurrency markets are highly
                                volatile and unpredictable. Always do your own research.
                            </p>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label class="block text-gray-400 mb-2">Select Cryptocurrency</label>
                            <div class="relative">
                                <select id="predict-coin"
                                    class="w-full bg-gray-700 border border-gray-600 rounded-lg py-3 px-4 text-white appearance-none focus:outline-none focus:border-accent"></select>
                                <div
                                    class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label class="block text-gray-400 mb-2">AI Prediction Key</label>
                            <div class="relative">
                                <input type="password" id="ai-key" placeholder="Enter your AI key"
                                    class="w-full bg-gray-700 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:border-accent">
                                <div class="absolute inset-y-0 right-0 flex items-center px-4">
                                    <i class="fas fa-key text-gray-400"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl p-4 border border-gray-700">
                        <canvas id="predictionChart" height="150"></canvas>
                    </div>
                    <div class="mt-6 flex flex-col sm:flex-row justify-between items-center">
                        <div>
                            <h4 class="text-lg font-bold text-white mb-1" id="prediction-title">Prediction</h4>
                            <p class="text-gray-400">Next 30 days forecast based on AI analysis</p>
                        </div>
                        <button id="runPrediction"
                            class="mt-4 sm:mt-0 px-6 py-3 rounded-lg bg-accent text-gray-900 font-semibold hover:bg-opacity-90 transition flex items-center glow-hover opacity-50 cursor-not-allowed sm:flex"
                            disabled>
                            <i class="fas fa-bolt mr-2"></i>Run Prediction (Coming soon)
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="lg:w-5/12">
                <!-- Historical Performance -->
                <div class="card p-6 mb-8 fade-in">
                    <h2 class="text-xl font-bold text-white mb-6">
                        <i class="fas fa-chart-area text-accent mr-3"></i>Historical Performance
                    </h2>
                    <div class="mb-6">
                        <div class="flex justify-between border-b border-gray-700">
                            <button class="timeframe-btn py-3 px-4 border-b-2 border-accent font-medium text-accent"
                                data-timeframe="1M">1M</button>
                            <button class="timeframe-btn py-3 px-4 font-medium text-gray-400 hover:text-white"
                                data-timeframe="3M">3M</button>
                            <button class="timeframe-btn py-3 px-4 font-medium text-gray-400 hover:text-white"
                                data-timeframe="6M">6M</button>
                            <button class="timeframe-btn py-3 px-4 font-medium text-gray-400 hover:text-white"
                                data-timeframe="1Y">1Y</button>
                            <button class="timeframe-btn py-3 px-4 font-medium text-gray-400 hover:text-white"
                                data-timeframe="All">All</button>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl p-4 border border-gray-700 mb-6">
                        <canvas id="performanceChart" height="150"></canvas>
                    </div>
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <p class="text-gray-400 text-sm">30D Return</p>
                            <p class="font-bold text-accent" id="return-30d">+0.0%</p>
                        </div>
                        <div>
                            <p class="text-gray-400 text-sm">Max Drawdown</p>
                            <p class="font-bold text-red-400" id="max-drawdown">0.0%</p>
                        </div>
                        <div>
                            <p class="text-gray-400 text-sm">Volatility</p>
                            <p class="font-bold text-gray-200" id="volatility">Medium</p>
                        </div>
                    </div>
                </div>

                <!-- Manage Holdings & CSV Import -->
                <div class="space-y-8">
                    <!-- Add/Edit Holdings -->
                    <div class="card p-6 fade-in">
                        <h2 class="text-xl font-bold text-white mb-6">
                            <i class="fas fa-plus-circle text-accent mr-3"></i>Add Holding
                        </h2>
                        <form id="add-holding-form">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <div>
                                    <label class="block text-gray-400 mb-2">Cryptocurrency</label>
                                    <div class="relative">
                                        <select id="coin-name"
                                            class="w-full bg-gray-700 border border-gray-600 rounded-lg py-3 px-4 text-white appearance-none focus:outline-none focus:border-accent"></select>
                                        <div
                                            class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                                            <i class="fas fa-chevron-down"></i>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-gray-400 mb-2">Amount</label>
                                    <input type="number" id="coin-amount" step="any" min="0" placeholder="0.00"
                                        class="w-full bg-gray-700 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:border-accent">
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <div>
                                    <label class="block text-gray-400 mb-2">Purchase Price</label>
                                    <input type="number" id="purchase-price" step="any" min="0" placeholder="0.00"
                                        class="w-full bg-gray-700 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:border-accent">
                                </div>
                                <div>
                                    <label class="block text-gray-400 mb-2">Date Acquired</label>
                                    <input type="date" id="date-acquired"
                                        class="w-full bg-gray-700 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:border-accent">
                                </div>
                            </div>
                            <div class="flex space-x-4">
                                <button type="submit"
                                    class="flex-1 px-6 py-3 rounded-lg bg-accent text-gray-900 font-semibold hover:bg-opacity-90 transition glow-hover">
                                    <i class="fas fa-save mr-2"></i>Add Holding
                                </button>
                                <button type="reset"
                                    class="px-4 py-3 rounded-lg border border-gray-600 text-gray-300 font-medium hover:bg-gray-700 transition">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- CSV Import -->
                    <div class="card p-6 fade-in">
                        <h2 class="text-xl font-bold text-white mb-6">
                            <i class="fas fa-file-import text-accent mr-3"></i>Import from CSV
                        </h2>
                        <div class="mb-6 p-6 border-2 border-dashed border-gray-600 rounded-xl bg-gray-800 text-center cursor-pointer hover:border-accent transition"
                            id="dropzone">
                            <i class="fas fa-cloud-upload-alt text-3xl text-gray-500 mb-4"></i>
                            <p class="text-gray-400 mb-2">Drag & drop your CSV file here</p>
                            <p class="text-gray-500 text-sm">or</p>
                            <label for="csvFile"
                                class="mt-4 px-6 py-3 rounded-lg bg-gray-700 text-gray-300 font-medium hover:bg-gray-600 transition inline-block cursor-pointer">
                                <i class="fas fa-folder-open mr-2"></i>Browse Files
                            </label>
                            <input type="file" id="csvFile" accept=".csv" class="hidden">
                        </div>
                        <div class="flex flex-col sm:flex-row justify-between items-center">
                            <div>
                                <p class="text-gray-400 text-sm">Supported formats: Coinbase, Binance, Kraken</p>
                            </div>
                            <button
                                class="mt-4 sm:mt-0 px-6 py-3 rounded-lg bg-gray-700 text-gray-300 font-medium hover:bg-gray-600 transition glow-hover">
                                <i class="fas fa-cog mr-2"></i>Import Settings
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Crypto News Section (Moved to Bottom) -->
    <div id="news-section" class="container mx-auto px-4 py-8 hidden">
        <h2 class="text-xl font-bold text-white mb-6">
            <i class="fas fa-newspaper text-accent mr-3"></i>Latest Crypto News
        </h2>
        <div id="news-feed" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </div>

    <footer class="py-6 mt-8 border-t border-gray-800">
        <div class="container mx-auto px-4 text-center text-gray-500 text-sm">
            <p>© 2025 CryptoTracker. All rights reserved. Cryptocurrency investments are subject to high market risk.
            </p>
            <p class="mt-2">Data is provided for informational purposes only and not intended as trading advice.</p>
        </div>
    </footer>

    <script src="./static/ai.js" type="module"></script>
</body>

</html>